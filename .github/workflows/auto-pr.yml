name: get latest release of grafana and prometheus
on:
  schedule:
    - cron: "44 11 * * 4" 
jobs:
  build:
    name: Get latest release
    runs-on: ubuntu-latest
    steps:
      - id: prometheus
        uses: pozetroninc/github-action-get-latest-release@master
        with:
          repo: prometheus/prometheus
          excludes: prerelease, draft, beta
      - id: grafana
        uses: pozetroninc/github-action-get-latest-release@master
        with:
          repository: grafana/grafana    
      - uses: actions/checkout@v2
      - name: create a file
        run: |
          echo "Prometheus latest release is ${{ steps.prometheus.outputs.release }}"
          echo "Prometheus latest release is ${{ steps.grafana.outputs.release }}"
#       - uses: docker/build-push-action@v1
#         with:
#           username: ${{ secrets.DOCKER_USERNAME }}
#           password: ${{ secrets.DOCKER_PASSWORD }}
#           repository: pozetroninc/keydb-timeseries
#           dockerfile: timeseries.dockerfile
#           build_args: KEY_DB_VERSION=${{ steps.keydb.outputs.release }}, REDIS_TIME_SERIES_VERSION=${{ steps.timeseries.outputs.release }}
#           tags: latest, ${{ steps.keydb.outputs.release }}_${{ steps.timeseries.outputs.release }}
